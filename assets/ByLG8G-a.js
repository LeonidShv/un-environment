import{d as I,c as B,v as O,n as U,_ as N,a as q,b as $}from"./CSWnRZmu.js";import{a2 as K,f as F,r as p,a as C,y as j,o as X,I as Y,h as H,Y as J,s as S,z as _,n as w,k as h,l as m,j as k,v as c,a0 as Q,a1 as W,t as Z,p as ee,q as te,_ as G,x as ne,F as ae}from"./WKfzQzi2.js";import{b as L,e as oe}from"./4SL0ukPY.js";import{useMap as re}from"./DzJYlqNO.js";import{useMapStore as le}from"./B5xm3yw_.js";import"./uEZhCmr_.js";const P="https://www.gstatic.com/charts/loader.js";let D=null;const b=new Map;function ie(){return window.google!==void 0?Promise.resolve(window.google.charts):(D===null&&(D=new Promise(e=>{const t=document.querySelector('script[src="'.concat(P,'"]')),a=t||document.createElement("script");t||(a.src=P,a.type="text/javascript",document.head.append(a)),a.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),D)}async function se(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:a="en",mapsApiKey:n}=arguments.length>1?arguments[1]:void 0;const i=await ie(),o="".concat(e,"_").concat(t.join("_"),"_").concat(a);if(b.has(o))return b.get(o);const r=new Promise(l=>{i.load(e,{packages:t,language:a,mapsApiKey:n}),i.setOnLoadCallback(()=>l(window.google))});return b.set(o,r),r}function ue(e,t,a){return e!==null&&t instanceof e.visualization.DataTable||e!==null&&t instanceof e.visualization.DataView?t:e!==null&&Array.isArray(t)?e.visualization.arrayToDataTable(t,a):e!==null&&t!==null&&typeof t=="object"?new e.visualization.DataTable(t):null}function T(e,t,a,n,i,o){const r=(u,s,d)=>{if(d===void 0)throw new Error("please, provide chart type property");return new s.visualization[d](u)};if(e===null)throw new Error("please, provide charts lib property");if(a===null)throw new Error("please, provide chart element property");return t=(o||r)(a,e,n),ce(e,t,i),t}function ce(e,t,a){if(a!==null)for(const[n,i]of Object.entries(a))e!==null&&t!==null&&e.visualization.events.addListener(t,n,i)}function M(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,a;function n(){return t}return function(){for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];const u=this,s=function(){a=void 0,e.apply(u,r)};a!==void 0&&clearTimeout(a),a=setTimeout(s,n())}}let v=null;const R=F({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,t){let{emit:a}=t;const n=p(null),i=p(null);function o(){if(v===null||n.value===null)return;const r=ue(v,e.data,e.isFirstRowLabels);if(r!==null){var l;(l=n.value)===null||l===void 0||l.draw(r,e.options)}}return C(()=>e.data,()=>o(),{deep:!0}),C(()=>e.options,()=>o(),{deep:!0}),C(()=>e.type,()=>{n.value=T(v,n.value,i.value,e.type,e.events,e.createChart),o()}),j(()=>{se(e.version,e.settings).then(r=>{r!==void 0&&(v=r,n.value=T(v,n.value,i.value,e.type,e.events,e.createChart),a("ready",n.value,r),o())}),e.resizeDebounce>0&&window.addEventListener("resize",M(o,e.resizeDebounce))}),X(()=>{n.value!==null&&typeof n.value.clearChart=="function"&&n.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",M(o,e.resizeDebounce))}),()=>Y("div",{ref:i},[])}}),x=K({});function de(){x.component("GChart",R)}const fe={version:"1.1.0",install:de};let V=null;typeof window<"u"&&(V=window.Vue);V!=null&&x.use(fe);const pe=e=>(ee("data-v-d3b371cf"),e=e(),te(),e),me={class:"chart"},ve={key:1,class:"no-data"},he=pe(()=>h("p",{class:"no-data__text"},"No data",-1)),ge={class:"m-t-2"},_e=F({__name:"VChartG",props:{isLoading:{type:Boolean,default:!1},type:{default:I.LineChart},chartData:{default:{}},caption:{default:""},settings:{default:null}},setup(e){const t=e,a=H(()=>!t.isLoading&&!t.chartData.length);return(n,i)=>{const o=B,r=O;return J((w(),S(o,null,{default:_(()=>[h("figure",null,[h("div",me,[n.chartData.length?(w(),S(m(R),{key:0,type:n.type,settings:n.settings,data:n.chartData},null,8,["type","settings","data"])):a.value?(w(),k("div",ve,[c(m(Q),{"animation-data":m(U),height:200,width:200},null,8,["animation-data"]),he])):W("",!0)]),h("figcaption",ge,Z(n.caption),1)])]),_:1})),[[r,n.isLoading]])}}}),we=G(_e,[["__scopeId","data-v-d3b371cf"]]),ye={class:"d-flex gap-2 pie-chart__wrapper"},Ce=F({__name:"TheMapChart",setup(e){const{getMapChartData:t}=re(),a=p([["Country","Element ton"],["Germany",2e3],["United States",3e3],["Brazil",4e3],["Canada",5e3],["France",600],["RU",0]]),n=le(),{structureSeriesForMapChart:i,dataSetsSeriesForMapChart:o}=ne(n),{readEnvironmentPieRelativeChart:r}=n,l=p("EN_ATM_CO2E_XLULUCF"),u=p(L.map(({value:g})=>g)),s=p(!0),d=async()=>{const g={detail:"full",startPeriod:"2020-01-01",endPeriod:"2020-12-31",dimensionAtObservation:"TIME_PERIOD"};try{s.value=!0,await r(l.value,u.value.join("+"),g)}finally{s.value=!1}const f=t(o.value,i.value);a.value=f};return j(async()=>{await d()}),(g,f)=>{const z=q,E=$,A=N;return w(),k(ae,null,[c(A,{class:"d-flex gap-1 m-b-1"},{default:_(()=>[c(E,null,{default:_(()=>[c(z,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=y=>l.value=y),options:m(oe),placeholder:"Elements",filterable:"",isLoading:s.value,onChange:d},null,8,["modelValue","options","isLoading"])]),_:1}),c(E,null,{default:_(()=>[c(z,{modelValue:u.value,"onUpdate:modelValue":f[1]||(f[1]=y=>u.value=y),options:m(L),filterable:"",placeholder:"Countries",multiple:"",isLoading:s.value,onChange:d},null,8,["modelValue","options","isLoading"])]),_:1})]),_:1}),h("div",ye,[c(we,{type:m(I).GeoChart,settings:{packages:["geochart"]},chartData:a.value},null,8,["type","chartData"])])],64)}}}),Se=G(Ce,[["__scopeId","data-v-35a705f3"]]);export{Se as default};
