import{_ as x,a as F,b as w,E as _}from"./BlhMxgJN.js";import{_ as N}from"./bqalAO-B.js";import{a as O,s as A,r,k as T,o as U,b as k,g as o,w as f,f as e,l as y,e as I,F as J,_ as B}from"./DP2Zw0Rp.js";import{g as D,b,e as M}from"./B_U7x_0N.js";import{useDashboard as j}from"./u7PyEDci.js";import{useEnvironmentStore as q}from"./DG3FWoSR.js";import"./DswUKgV7.js";const X={class:"d-flex gap-2 pie-chart__wrapper wrap"},$=O({__name:"ThePiaChartRelative",setup(z){const{getPieChartData:E}=j(),P=q(),{dataSetsSeriesForPieRelativeChart:L,structureSeriesForPieRelativeChart:R}=A(P),{readEnvironmentPieRelativeChart:V}=P,d=r("EN_ATM_CO2E_XLULUCF"),u=r(["AUS"]),v=r({labels:[],datasets:[]}),h=r({labels:[],datasets:[]}),C=r({labels:[],datasets:[]}),n=r(!0),m=async()=>{const g={detail:"full",startPeriod:"2020-01-01",endPeriod:"2020-12-31",dimensionAtObservation:"TIME_PERIOD"};try{n.value=!0,await V(d.value,u.value.join("+"),g)}finally{n.value=!1}const a=E(L.value),l=JSON.parse(JSON.stringify(a)),c=JSON.parse(JSON.stringify(a)),s=D(R.value),i=b.filter(({label:t})=>s==null?void 0:s.includes(t));l[0].data=a[0].data.map((t,p)=>t/i[p].population[2020]),c[0].data=a[0].data.map((t,p)=>t/i[p].area[2020]),v.value={datasets:a,labels:s},h.value={datasets:l,labels:s},C.value={datasets:c,labels:s}};return T(async()=>{await m()}),(g,a)=>{const l=x,c=F,s=w,i=N;return U(),k(J,null,[o(s,{class:"d-flex wrap gap-1 m-b-1"},{default:f(()=>[o(c,null,{default:f(()=>[o(l,{modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=t=>y(d)?d.value=t:null),options:e(M),placeholder:"Elements",filterable:"",isLoading:e(n),onChange:m},null,8,["modelValue","options","isLoading"])]),_:1}),o(c,null,{default:f(()=>[o(l,{modelValue:e(u),"onUpdate:modelValue":a[1]||(a[1]=t=>y(u)?u.value=t:null),options:e(b),filterable:"",placeholder:"Countries",multiple:"",isLoading:e(n),onChange:m},null,8,["modelValue","options","isLoading"])]),_:1})]),_:1}),I("div",X,[o(i,{class:"pie-chart",data:e(v),type:e(_).Pie,isLoading:e(n),caption:"Picture 3. Emissions from various countries, measured in tons in the 2020."},null,8,["data","type","isLoading"]),o(i,{class:"pie-chart",data:e(h),type:e(_).Pie,isLoading:e(n),caption:"Picture 4.Emissions from various countries, measured in tons per person in the 2020."},null,8,["data","type","isLoading"]),o(i,{class:"pie-chart",data:e(C),type:e(_).Pie,isLoading:e(n),caption:"Picture 5. Emissions from various countries, measured in tons per square kilometer in the year 2020."},null,8,["data","type","isLoading"])])],64)}}}),ee=B($,[["__scopeId","data-v-e959d933"]]);export{ee as default};
