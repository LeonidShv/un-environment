import{d as I,c as O,v as U,n as x,_ as N,a as q,b as $}from"./BahgQiTZ.js";import{a2 as K,a as F,r as p,n as C,i as G,q as X,I as Y,A as H,Y as J,f as z,w as _,o as w,b as h,u as m,c as j,h as c,a0 as Q,a1 as W,B as Z,p as ee,g as te,_ as k,s as ne,F as ae}from"./BgU7VtgD.js";import{b as L,e as oe}from"./CjlE98iZ.js";import{useMap as re}from"./BpqDcl5Q.js";import{useMapStore as ie}from"./DUjSq5gl.js";import"./DCG6UpNz.js";const P="https://www.gstatic.com/charts/loader.js";let b=null;const D=new Map;function le(){return window.google!==void 0?Promise.resolve(window.google.charts):(b===null&&(b=new Promise(e=>{const t=document.querySelector('script[src="'.concat(P,'"]')),a=t||document.createElement("script");t||(a.src=P,a.type="text/javascript",document.head.append(a)),a.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),b)}async function se(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:a="en",mapsApiKey:n}=arguments.length>1?arguments[1]:void 0;const l=await le(),o="".concat(e,"_").concat(t.join("_"),"_").concat(a);if(D.has(o))return D.get(o);const r=new Promise(i=>{l.load(e,{packages:t,language:a,mapsApiKey:n}),l.setOnLoadCallback(()=>i(window.google))});return D.set(o,r),r}function ue(e,t,a){return e!==null&&t instanceof e.visualization.DataTable||e!==null&&t instanceof e.visualization.DataView?t:e!==null&&Array.isArray(t)?e.visualization.arrayToDataTable(t,a):e!==null&&t!==null&&typeof t=="object"?new e.visualization.DataTable(t):null}function T(e,t,a,n,l,o){const r=(u,s,d)=>{if(d===void 0)throw new Error("please, provide chart type property");return new s.visualization[d](u)};if(e===null)throw new Error("please, provide charts lib property");if(a===null)throw new Error("please, provide chart element property");return t=(o||r)(a,e,n),ce(e,t,l),t}function ce(e,t,a){if(a!==null)for(const[n,l]of Object.entries(a))e!==null&&t!==null&&e.visualization.events.addListener(t,n,l)}function M(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,a;function n(){return t}return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];const u=this,s=function(){a=void 0,e.apply(u,r)};a!==void 0&&clearTimeout(a),a=setTimeout(s,n())}}let v=null;const A=F({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,t){let{emit:a}=t;const n=p(null),l=p(null);function o(){if(v===null||n.value===null)return;const r=ue(v,e.data,e.isFirstRowLabels);if(r!==null){var i;(i=n.value)===null||i===void 0||i.draw(r,e.options)}}return C(()=>e.data,()=>o(),{deep:!0}),C(()=>e.options,()=>o(),{deep:!0}),C(()=>e.type,()=>{n.value=T(v,n.value,l.value,e.type,e.events,e.createChart),o()}),G(()=>{se(e.version,e.settings).then(r=>{r!==void 0&&(v=r,n.value=T(v,n.value,l.value,e.type,e.events,e.createChart),a("ready",n.value,r),o())}),e.resizeDebounce>0&&window.addEventListener("resize",M(o,e.resizeDebounce))}),X(()=>{n.value!==null&&typeof n.value.clearChart=="function"&&n.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",M(o,e.resizeDebounce))}),()=>Y("div",{ref:l},[])}}),B=K({});function de(){B.component("GChart",A)}const fe={version:"1.1.0",install:de};let V=null;typeof window<"u"&&(V=window.Vue);V!=null&&B.use(fe);const pe=e=>(ee("data-v-d3b371cf"),e=e(),te(),e),me={class:"chart"},ve={key:1,class:"no-data"},he=pe(()=>h("p",{class:"no-data__text"},"No data",-1)),ge={class:"m-t-2"},_e=F({__name:"VChartG",props:{isLoading:{type:Boolean,default:!1},type:{default:I.LineChart},chartData:{default:{}},caption:{default:""},settings:{default:null}},setup(e){const t=e,a=H(()=>!t.isLoading&&!t.chartData.length);return(n,l)=>{const o=O,r=U;return J((w(),z(o,null,{default:_(()=>[h("figure",null,[h("div",me,[n.chartData.length?(w(),z(m(A),{key:0,type:n.type,settings:n.settings,data:n.chartData},null,8,["type","settings","data"])):a.value?(w(),j("div",ve,[c(m(Q),{"animation-data":m(x),height:200,width:200},null,8,["animation-data"]),he])):W("",!0)]),h("figcaption",ge,Z(n.caption),1)])]),_:1})),[[r,n.isLoading]])}}}),we=k(_e,[["__scopeId","data-v-d3b371cf"]]),ye={class:"d-flex gap-2 pie-chart__wrapper"},Ce=F({__name:"TheMapChart",setup(e){const{getMapChartData:t}=re(),a=p([["Country","Element ton"],["Germany",2e3],["United States",3e3],["Brazil",4e3],["Canada",5e3],["France",600],["RU",0]]),n=ie(),{structureSeriesForMapChart:l,dataSetsSeriesForMapChart:o}=ne(n),{readEnvironmentPieRelativeChart:r}=n,i=p("EN_ATM_CO2E_XLULUCF"),u=p(L.map(({value:g})=>g)),s=p(!0),d=async()=>{const g={detail:"full",startPeriod:"2020-01-01",endPeriod:"2020-12-31",dimensionAtObservation:"TIME_PERIOD"};try{s.value=!0,await r(i.value,u.value.join("+"),g)}finally{s.value=!1}const f=t(o.value,l.value);a.value=f};return G(async()=>{await d()}),(g,f)=>{const E=q,S=$,R=N;return w(),j(ae,null,[c(R,{class:"d-flex gap-1 m-b-1"},{default:_(()=>[c(S,null,{default:_(()=>[c(E,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=y=>i.value=y),options:m(oe),placeholder:"Elements",filterable:"",isLoading:s.value,onChange:d},null,8,["modelValue","options","isLoading"])]),_:1}),c(S,null,{default:_(()=>[c(E,{modelValue:u.value,"onUpdate:modelValue":f[1]||(f[1]=y=>u.value=y),options:m(L),filterable:"",placeholder:"Countries",multiple:"",isLoading:s.value,onChange:d},null,8,["modelValue","options","isLoading"])]),_:1})]),_:1}),h("div",ye,[c(we,{type:m(I).GeoChart,settings:{packages:["geochart"]},chartData:a.value},null,8,["type","chartData"])])],64)}}}),ze=k(Ce,[["__scopeId","data-v-35a705f3"]]);export{ze as default};
